<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Comparing Triplestores</title>
    <meta name="description" content="Some musings about coding. Currently exploring graph datastores.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://utecht.github.io/triplestores">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Utecht Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Comparing Triplestores</h1>
    <p class="post-meta">Jun 5, 2015</p>
  </header>

  <article class="post-content">
    <p>In looking into the world of triplestores there exists very little in the way of traditional web communities discussing and comparing them.  Most of the discussion appears to happen in academic journals, which would make sense as their widest use is in academia.  The concepts of the <a href="http://en.wikipedia.org/wiki/Semantic_Web">semantic web</a> and graph databases have great uses outside of academia and hopefully I can show that.  A good starting place is comparing some of the available triplestores with the goal of producing a modern web application that would ideally have a mostly javascript client-side that is querying and updating a triplestore on the backend.</p>

<p>I picked a small sample of open source, actively maintained and easy to install stores to run through a series of tests.</p>

<table>
  <tbody>
    <tr>
      <td>Name</td>
      <td>License</td>
      <td>Deployment</td>
      <td>Language</td>
    </tr>
    <tr>
      <td><a href="http://jena.apache.org/index.html">Apache Fuseki</a></td>
      <td><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2</a></td>
      <td>Standalone or WAR</td>
      <td>Java</td>
    </tr>
    <tr>
      <td><a href="http://www.blazegraph.com/blazegraph">Blazegraph</a></td>
      <td>GPLv2 or commercial</td>
      <td>Standalone or WAR</td>
      <td>Java</td>
    </tr>
    <tr>
      <td><a href="http://rdf4j.org/">Sesame</a></td>
      <td>BSD</td>
      <td>WAR</td>
      <td>Java</td>
    </tr>
    <tr>
      <td><a href="http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/">Virtuoso</a></td>
      <td>GPL</td>
      <td>Native</td>
      <td>C</td>
    </tr>
  </tbody>
</table>

<p>Using these four I will compare them and discuss general merits that could be applied against any store you wish to test.  The categories will be.</p>

<ul>
  <li><a href="#conf">Installation/Configuration</a></li>
  <li><a href="#admin">Admin Interface</a></li>
  <li><a href="#loading">Data Loading</a></li>
  <li><a href="#exploration">Data Exploration</a></li>
  <li><a href="#REST">REST</a></li>
  <li><a href="#features">Feature Support</a></li>
  <li><a href="#performance">Performance</a></li>
  <li><a href="#prod">Production Readiness</a></li>
</ul>

<h1 id="a-nameconfainstallationconfiguration"><a name="conf"></a>Installation/Configuration</h1>
<p>I wanted a similar environment for all of the testing, so I chose to deploy each of these into a Virtualbox VM with identical specs.  The host of these VMs was a mid 2012 Mac Pro with 2 x 2.4 Ghz 6-core Xeon processors and 16GB of ram.  Each VM was given 8GB of ram and 4 processors, and while performance tests were running only a single VM would be active at a time.  I chose CentOS 7 as the operating system and Tomcat as the application server for the stores that needed it.  Given the choice to run as a standalone or WAR file I used the WAR files with Tomcat.</p>

<h4 id="fuseki">Fuseki</h4>
<p>Fuseki is a web front-end provided for the Apache Jena RDF tools, I downloaded the <a href="http://jena.apache.org/download/index.cgi">Fuseki2 tar</a> and followed the rather terse <a href="http://jena.apache.org/documentation/fuseki2/fuseki-run.html#fuseki-as-a-web-application">installation instructions</a>.</p>

<blockquote>
  <p>Fuseki as a Web Application</p>
</blockquote>

<blockquote>
  <p>Fuseki can run from a WAR file.</p>
</blockquote>

<blockquote>
  <p>FUSEKI_HOME is not applicable.</p>
</blockquote>

<blockquote>
  <p>FUSEKI_BASE defaults to /etc/fuseki which must be a writeable directory. It is initialised the first time Fuseki runs, including a Apache Shiro security file but this is only intended as a starting point. It restricts use of the admin UI to the local machine.</p>
</blockquote>

<p>Dropping the WAR into Tomcat’s folder and creating a /etc/fuseki folder with Tomcat as the owner appeared to do the trick, except that the admin interface was missing some elements.  It took some investigation through firefox’s inspect element to see that it was attempting to load additional resources and was getting a 403 Forbidden from the server.  Investigating inside the /etc/fuseki folder there was a shiro.ini file with basic permissions set.  I’ve never messed with Apache Shiro security, but my assumption was that by port forwarding into the VM the server didn’t see the request as coming from localhost and was denying access.  As a simple fix I allowed all access by uncommenting the line to allow all access.  This solved the problem and I had full access to the admin interface.</p>

<p>Installation was mostly straight forward, although due to my deployment setup on a VM I had some rather opaque security issues.</p>

<h4 id="blazegraph">Blazegraph</h4>
<p>Blazegraph was another simple Java webserver deployment.  Following the instructions <a href="http://www.blazegraph.com/download">here</a>, I extracted the WAR and dropped it in Tomcat’s folder.  After restarting Tomcat the admin interface was fully accessible and working.</p>

<h4 id="sesame">Sesame</h4>
<p>Sesame had the most complete <a href="http://rdf4j.org/sesame/2.8/docs/using+sesame.docbook?view">installation instructions</a> and good descriptions of the different options for installation.  Sesame can be slightly confusing as it is used by other triplestores as middleware for programming interfaces or implementing REST, however it has a native triplestore built in and can function as a server on its own.  Installation was a simple matter of extracting the 2 WAR files into Tomcat’s webapp folder and restarting.  After Tomcat launched back up both the SPARQL endpoint and the workbench were accessible. </p>

<h4 id="virtuoso">Virtuoso</h4>
<p>Virtuoso was the only non-Java server I was testing, however with any experience compiling software its installation should be a breeze.  The requirements to build are clearly listed with versions in the <a href="https://github.com/openlink/virtuoso-opensource">installation instructions</a> on the github repository.  After insuring they were all the proper version, the make and install went smoothly.  After finding the executable and pointing it to the default config the admin interface was accessible.</p>

<h1 id="a-nameadminaadmin-interface"><a name="admin"></a>Admin Interface</h1>
<p>The admin interface is an important tool for people new to graph databases and should ideally provide you not just with a way to manage the graph, but also to query, inspect and load data into it.</p>

<h4 id="fuseki-1">Fuseki</h4>
<p><img src="http://utecht.github.io/assets/fuseki_admin.png" alt="Fuseki Admin Interface" />
The Fuseki admin interface is very responsive and uses AJAX calls for various things.  This can cause nothing to appear if your permissions are not set up properly.  It has basic controls to create new datasets, backup datasets, see how many queries have been run, upload data, and a very fully featured SPARQL query writer.</p>

<h4 id="blazegraph-1">Blazegraph</h4>
<p><img src="http://utecht.github.io/assets/blaze_admin.png" alt="Blazegraph Admin Interface" />
Blazegraph has a very clean and simple admin interface, that uses http sessions to keep information between tabs.  It allows you to create new datasets, load data, run SPARQL queries and explore data.  It also has some performance and status tools, allowing you to view currently running queries no matter where they came from.</p>

<h4 id="sesame-1">Sesame</h4>
<p><img src="http://utecht.github.io/assets/sesame_admin.png" alt="Sesame Admin Interface" />
The sesame admin inferface comes from the workbench WAR file.  It allows you to create various types of graphs, load data, explore data and run queries.</p>

<h4 id="virtuoso-1">Virtuoso</h4>
<p><img src="http://utecht.github.io/assets/virtuoso_admin.png" alt="Virtuoso Admin Interface" />
Compared to all the others the virtuoso admin interface is very confusing, and this is probably because virtuoso is not just a triplestore, but a relational database with a linked data component built in.  It can create graphs, and has tools to query and load them, but it is very heavy and prone to not working.</p>

<h1 id="a-nameloadingadata-loading"><a name="loading"></a>Data Loading</h1>
<p>The first step after finishing basic set up of the triplestores was to attempt to load something into them and start querying it.  I was looking for a decently sized dataset with data that was not hard to understand to people outside the discipline.  I settled on the <a href="http://datahub.io/dataset/linkedmdb">Linked Movie Database dataset</a> as it fulfilled all these requirements.  It is a set of roughly 600k triples in the N-triples format.</p>

<div class="highlight"><pre><code class="language-n3" data-lang="n3"><span class="nc">&lt;http://data.linkedmdb.org/resource/interlink/36322&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/oddlinker/linkage_run&gt;</span> <span class="na">&lt;http://data.linkedmdb.org/resource/linkage_run/1&gt;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film_cut/30648&gt;</span> <span class="nf">&lt;http://xmlns.com/foaf/0.1/page&gt;</span> <span class="na">&lt;http://www.freebase.com/view/guid/9202a8c04000641f800000000b4dedc5&gt;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/performance/25260&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/performance_character&gt;</span> <span class="s">&quot;&quot;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/performance/160947&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/performance_actor&gt;</span> <span class="s">&quot;Chris Messina&quot;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/performance/171014&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/performance_film&gt;</span> <span class="s">&quot;Saikin-rett\u00C5\u008D&quot;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film/22085&gt;</span> <span class="nf">&lt;http://xmlns.com/foaf/0.1/page&gt;</span> <span class="na">&lt;http://www.freebase.com/view/guid/9202a8c04000641f8000000006b56bdb&gt;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film/38811&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/initial_release_date&gt;</span> <span class="s">&quot;1982&quot;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film/97822&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/filmid&gt;</span> <span class="s">&quot;97822&quot;</span><span class="na">^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film_film_distributor_relationship/7336&gt;</span> <span class="nf">&lt;http://data.linkedmdb.org/resource/movie/film_film_distributor_relationship_distributor&gt;</span> <span class="s">&quot;Metro-Goldwyn-Mayer&quot;</span> <span class="p">.</span>
<span class="nc">&lt;http://data.linkedmdb.org/resource/film/37528&gt;</span> <span class="nf">&lt;http://xmlns.com/foaf/0.1/page&gt;</span> <span class="na">&lt;http://www.rottentomatoes.com/alias?type=imdbid&amp;s=0164961&gt;</span> <span class="p">.</span></code></pre></div>

<p>With this 800MB file in hand I attempted to load it directly into the various stores with varying degrees of success.</p>

<h4 id="fuseki-2">Fuseki</h4>
<p>Fuseki allowed for multiple files to be uploaded at once and even gave a progress bar, however it did not load the raw file properly and gave an error message with no additional information.  I assumed there was a format problem inside the file so I went about converting it to another format.  To accomplish this I used python’s RDFLib which can read various RDF file formats and allow you to perform queries against an internal graph that it builds.  It can then also serialize this graph back out into many formats.  However, RDFLib also refused to read the file due to special characters in the URIs.  I set about using sed and a custom python script to correct all the issues and finally loaded the n-triples file into RDFLib and then re-serialized it back out into Turtle format.  I tried uploading the Turtle file into Fuseki and it took about 15min but worked and correctly updated its triple count.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="n">Graph</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>

<span class="n">g</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&quot;m5.nt&quot;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&quot;nt&quot;</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;movies.ttl&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
	<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&quot;turtle&quot;</span><span class="p">))</span></code></pre></div>

<h4 id="blazegraph-2">Blazegraph</h4>
<p>Blazegraph allows you to upload files directly but limits them to some size over HTTP, however it also allows you to point to a file on the local file system and load from there.  After moving the original file over to the server it spent about 10 minutes loading it and reported back that it now had 600k triples.</p>

<h4 id="sesame-2">Sesame</h4>
<p>Sesame allows files to be directly uploaded through workbench.  Having had so many problems with the raw file in Fuseki I tried uploading the corrected n-triple file that worked with RDFLib and after roughly 15min it reported back that it was loaded and updated its number of triples.</p>

<h4 id="virtuoso-2">Virtuoso</h4>
<p>Virtuoso also allows file uploading through the admin interface.  I uploaded the ‘corrected’ n-triples file and it appeared to work.  However it does not give a count of triples loaded anywhere, and the only way to tell was to attempt to query against it, which only worked halfway, but more on that in the next section.</p>

<h1 id="a-nameexplorationadata-exploration"><a name="exploration"></a>Data Exploration</h1>
<p>The ability to run queries from the admin interface and explore the data contained in the store is an important function for these triplestores as it replaces the functionality of browsing schemas in a traditional relational database.</p>

<h4 id="fuseki-3">Fuseki</h4>
<p><img src="http://utecht.github.io/assets/fuseki_query.png" alt="Fuseki Query Interface" />
Fuseki has a very polished query interface, which supports syntax highlighting, syntax checking, common prefix addition and the ability to turn a query into a URL to request it from the REST interface.  However, despite all the positives it has some large drawbacks.  First it lacks any sort of exploration meaning you will need to craft a new query each time you want to explore what your data looks like.  Secondly, it appears to send all data returned from a query back to the client for client-side javascript to handle the pagination, this can cause problems when queries return large datasets back.</p>

<h4 id="blazegraph-3">Blazegraph</h4>
<p><img src="http://utecht.github.io/assets/blaze_query.png" alt="Blazegraph Query Interface" />
Blazegraph also supports syntax highlighting in its query editor, however it lacks syntax checking or the ability to URL-ize the query.  It does pagination of queries on the server-side and handles query running in an HTTP session, meaning you can move off the query tab to explore other sections of the admin interface, such as the excellent status page where you can view information about currently running queries.  Also it keeps a log of recently run queries and the time they took to complete, meaning you can do a small amount of performance testing and run queries again.  Query results are returned such that non-literals link to the data exploration side of the admin interface.
<img src="http://utecht.github.io/assets/blaze_explore.png" alt="Blazegraph Exploration Interface" />
Once you are in the data exploration side you can see outgoing and incoming links as well as attributes of the current node.  These are all links meaning you can further explore the graph by clicking.  The queries being run to generate this are logged in the status page and can be viewed just like a normal query.</p>

<h4 id="sesame-3">Sesame</h4>
<p><img src="http://utecht.github.io/assets/sesame_query.png" alt="Sesame Query Interface" />
Sesame has a query interface very similar to Fuseki with the same javascript editor, however it does not parse the results with client-side javascript.  Much like blazegraph it returns results as URLs into its own exploration interface.
<img src="http://utecht.github.io/assets/sesame_explore.png" alt="Sesame Explore Interface" />
Sesame shows the same information as blazegraph it just does not break it out as nicely.  When working with OWL classes though it will display a super/sub-class structure, which can be useful for finding problems.  Sesame has one additional feature over blazegraph, which is an extra button on the query results and exploration allowing you to follow a URL to its original server if you are working with data from an external source.</p>

<h4 id="virtuoso-3">Virtuoso</h4>
<p><img src="http://utecht.github.io/assets/virtuoso_query.png" alt="Virtuoso Query Interface" />
While investigating virtuoso’s query interface I was having trouble finding a query that would run, and this was when I discovered that virtuoso had either not loaded all of the data or discarded a significant amount of it.  The query interface for virtuoso is very basic with no syntax highlighting or any features to explore the data.  I could have mis-configured the graph or uploaded the file incorrectly, but without any good documentation to follow I’m not sure what is the problem here.  Because of this problem I will not consider virtuoso past this point, but may update this at a later date if I can figure out the problem.</p>

<h1 id="a-namerestarest"><a name="REST"></a>REST</h1>
<p>For my purposes this was the most important feature of these triplestores as it would be the only way the application would interact with the data.  I had need of both the ability to query and update the data in the store from a client-side javascript application.  Unfortunately due to the nature of RDF working directly client to triplestore is difficult.  In traditional RESTful APIs collections of members can be retrieved and then all properties of each member can be retrieved independently.  Because of the graph nature of RDF neither of these works quite the same from a REST point of view.  Take for example a graph storing information about books with this simple structure.</p>

<div class="highlight"><pre><code class="language-turtle" data-lang="turtle"><span class="k">@prefix </span><span class="nv">book: </span><span class="nn">&lt;http://example.com/book/&gt; .</span>
<span class="k">@prefix </span><span class="nv">author: </span><span class="nn">&lt;http://example.com/author/&gt; .</span>


<span class="nc">book:snow_crash</span> <span class="nf">book:name</span> <span class="s">&quot;Snow Crash&quot;</span><span class="p">;</span>
	<span class="nf">book:published</span> <span class="mi">1992</span><span class="p">;</span>
	<span class="nf">book:author</span> <span class="na">author:stephenson</span> <span class="p">.</span>

<span class="nc">book:diamond_age</span> <span class="nf">book:name</span> <span class="s">&quot;Diamond Age&quot;</span> <span class="p">;</span>
	<span class="nf">book:published</span> <span class="mi">1995</span><span class="p">;</span>
	<span class="nf">book:author</span> <span class="na">author:stephenson</span> <span class="p">.</span>

<span class="nc">author:stephenson</span> <span class="nf">author:fullname</span> <span class="s">&quot;Niel Stephenson&quot;</span> <span class="p">.</span></code></pre></div>

<p>You can picture a simple API for viewing this data with a traditional REST framework.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">/books -&gt; list of all book ids
/book/:id -&gt; properties of the book identified by :id
And then a second set of endpoints for authors.
/authors
/author/:id</code></pre></div>

<p>This sort of REST API is not possible only using the triplestores I have been investigating.  They all have slightly different REST capabilities, but all share a few major shortcomings.</p>

<h4 id="blazegraph-4">Blazegraph</h4>
<p>Blazegraph allows you to either use Sesame to serve its REST endpoint or the built in <a href="http://wiki.blazegraph.com/wiki/index.php/NanoSparqlServer#REST_API">NanoSparqlServer</a>, these are the features of the NanoSparqlServer.  This allows for data to be loaded through various formats and the ability to directly execute arbitrary SPARQL queries.  This is a problem because it forces anyone else attempting to use the system to know the layout of our data, and removes any ability to do security as the entire graph is exposed to the internet.</p>

<p>With that in mind if we had the URI for a book and wanted to query the information for it there would be two options.  We could either run a naive query asking for all triples with the book as the subject, or a well defined query to return exactly the information we want.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl localhost:8080/bigdata/namespace/books/sparql <span class="se">\</span>
--data-urlencode <span class="s2">&quot;query=select * where{&lt;http://example.com/book/diamond_age&gt; ?p ?o}&quot;</span> <span class="se">\</span>
--data-urlencode <span class="s2">&quot;format=json&quot;</span></code></pre></div>

<p>This naive query produces results that are somewhat difficult to work with, as you need loop through the bindings and keep a list of values that you have found.</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;head&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;vars&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;results&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bindings&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nt">&quot;p&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;uri&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://example.com/book/author&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;o&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;uri&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://example.com/author/stephenson&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;p&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;uri&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://example.com/book/name&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;o&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;Diamond Age&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;p&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;uri&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://example.com/book/published&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;o&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;datatype&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;1995&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>With knowledge of the data you can produce a much more refined SPARQL query to pull just the information that you want.</p>

<div class="highlight"><pre><code class="language-sparql" data-lang="sparql"><span class="k">PREFIX</span><span class="w"> </span><span class="nn">book</span><span class="p">:</span><span class="nl">&lt;http://example.com/book/&gt;</span><span class="w"></span>
<span class="k">PREFIX</span><span class="w"> </span><span class="nn">author</span><span class="p">:</span><span class="nl">&lt;http://example.com/author/&gt;</span><span class="w"></span>

<span class="k">select</span><span class="w"> </span><span class="nv">?name</span><span class="w"> </span><span class="nv">?published</span><span class="w"> </span><span class="nv">?author_name</span><span class="w"> </span><span class="k">where</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nn">book</span><span class="p">:</span><span class="nt">diamond_age</span><span class="w"> </span><span class="nn">book</span><span class="p">:</span><span class="nt">name</span><span class="w"> </span><span class="nv">?name</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="nn">book</span><span class="p">:</span><span class="nt">diamond_age</span><span class="w"> </span><span class="nn">book</span><span class="p">:</span><span class="nt">published</span><span class="w"> </span><span class="nv">?published</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="nn">book</span><span class="p">:</span><span class="nt">diamond_age</span><span class="w"> </span><span class="nn">book</span><span class="p">:</span><span class="nt">author</span><span class="w"> </span><span class="nv">?author</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="w">  </span><span class="nv">?author</span><span class="w"> </span><span class="k">a</span><span class="nn">uthor</span><span class="p">:</span><span class="nt">fullname</span><span class="w"> </span><span class="nv">?author_name</span><span class="w"> </span><span class="p">.</span><span class="w"></span>
<span class="p">}</span><span class="w"></span></code></pre></div>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl localhost:8080/bigdata/namespace/books/sparql <span class="se">\</span>
--data-urlencode <span class="s2">&quot;query=PREFIX book:&lt;http://example.com/book/&gt; PREFIX author:&lt;http://example.com/author/&gt; select ?name ?published ?author_name where{ book:diamond_age book:name ?name . book:diamond_age book:published ?published . book:diamond_age book:author ?author . ?author author:fullname ?author_name .}&quot;</span> <span class="se">\</span>
--data-urlencode <span class="s2">&quot;format=json&quot;</span></code></pre></div>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;head&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;vars&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;published&quot;</span><span class="p">,</span> <span class="s2">&quot;author_name&quot;</span> <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;results&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;bindings&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nt">&quot;author_name&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;Niel Stephenson&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;Diamond Age&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;published&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;datatype&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;1995&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>However, this approach requires embedding large SPARQL queries in your client-side applications or require anyone using your data to have knowledge of SPARQL and your data layout.  This is not ideal.</p>

<h4 id="fuseki-4">Fuseki</h4>
<p>Fuseki implements the same <a href="http://jena.apache.org/documentation/fuseki2/soh.html#service-endpoints">SPARQL endpoints</a> as Blazegraph and returns things in the same format.</p>

<h4 id="sesame-4">Sesame</h4>
<p>In addition to support for HTTP SPARQL queries like Blazegraph and Fuseki sesame has support for asking for individual subjects, predicates or objects using the following syntax.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">curl -G localhost:8080/openrdf-sesame/repositories/books/statements <span class="se">\</span>
--data-urlencode <span class="s2">&quot;subj=&lt;http://example.com/book/diamond_age&gt;&quot;</span> <span class="se">\</span>
-H <span class="s2">&quot;Accept: application/rdf+json&quot;</span></code></pre></div>

<p>Results in the following json block are somewhat like the naive query seen above as it is returning full URIs and would require additional queries to find all the information that we want to display the basic information of this book.</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;http://example.com/book/diamond_age&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;http://example.com/book/author&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://example.com/author/stephenson&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;uri&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;http://example.com/book/name&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;Diamond Age&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;datatype&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#string&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;http://example.com/book/published&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="s2">&quot;1995&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span> <span class="p">:</span> <span class="s2">&quot;literal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;datatype&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h1 id="a-namefeaturesardf-feature-support"><a name="features"></a>RDF Feature Support</h1>
<p>When I speak of RDF features I mean any possible inference or reasoning that the triplestore can do based on any ontologies that have been loaded into the store.  Inferences and reasoning are similar but quite distinct things.  Inference generally refers </p>

<h4 id="fuseki-5">Fuseki</h4>

<h4 id="blazegraph-5">Blazegraph</h4>

<h4 id="sesame-5">Sesame</h4>

<h1 id="a-nameperformanceaperformance"><a name="performance"></a>Performance</h1>

<h4 id="fuseki-6">Fuseki</h4>

<h4 id="blazegraph-6">Blazegraph</h4>

<h4 id="sesame-6">Sesame</h4>

<h1 id="a-nameprodaproduction-readiness"><a name="prod"></a>Production Readiness</h1>

<h4 id="fuseki-7">Fuseki</h4>

<h4 id="blazegraph-7">Blazegraph</h4>

<h4 id="sesame-7">Sesame</h4>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Utecht Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Utecht Blog</li>
          <li><a href="mailto:joseph.utecht@gmail.com">joseph.utecht@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/utecht">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">utecht</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/thenmal">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">thenmal</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Some musings about coding. Currently exploring graph datastores.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
